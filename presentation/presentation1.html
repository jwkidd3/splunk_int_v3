<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splunk Intermediate - Day 1</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/theme/black.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/highlight/monokai.css">
    <style>
        .reveal h1, .reveal h2, .reveal h3 {
            text-transform: none;
        }
        .reveal pre {
            width: 100%;
            font-size: 0.5em;
        }
        .reveal code {
            background: #3f3f3f;
            padding: 2px 6px;
            border-radius: 3px;
        }
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .highlight-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .lab-callout {
            background: #ff6b00;
            color: white;
            padding: 40px;
            border-radius: 15px;
            font-size: 1.5em;
            text-align: center;
            margin: 50px auto;
            max-width: 800px;
            box-shadow: 0 10px 30px rgba(255, 107, 0, 0.5);
        }
        .lab-callout h2 {
            margin: 0 0 20px 0;
            font-size: 2em;
        }
        .lab-callout p {
            margin: 10px 0;
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">

            <!-- Title Slide -->
            <section data-background-gradient="linear-gradient(to bottom, #000000, #1c4587)">
                <h1>Splunk Intermediate</h1>
                <h3>Day 1: Search, Visualization & Data Enrichment</h3>
                <p style="margin-top: 50px;">Buttercup Games Scenario</p>
            </section>

            <!-- Course Scenario -->
            <section>
                <h2>Buttercup Games</h2>
                <div class="highlight-box">
                    <p><strong>E-commerce gaming company analyzing:</strong></p>
                    <ul>
                        <li>Web traffic (online store)</li>
                        <li>Vendor sales (retail stores)</li>
                        <li>Security events (authentication)</li>
                        <li>Network proxy logs</li>
                        <li>Game telemetry (SimCube Beta)</li>
                    </ul>
                </div>
                <p><strong>4 Indexes:</strong> web, security, network, games</p>
            </section>

            <!-- Lab 0 Callout -->
            <section data-background-color="#ff6b00">
                <div class="lab-callout">
                    <h2>ðŸ”¬ Lab 0</h2>
                    <h3>Data Loading Activity</h3>
                    <p><strong>Follow:</strong> labs/lab00_data_loading.md</p>
                </div>
            </section>

            <!-- Module 1: Beyond Search Fundamentals -->
            <section data-background-gradient="linear-gradient(to bottom, #1c4587, #000000)">
                <h2>Module 1</h2>
                <h3>Beyond Search Fundamentals</h3>
            </section>

            <section>
                <h3>Case Sensitivity</h3>
                <p>Field names are case-sensitive, values are not</p>
                <pre><code class="language-spl">index=web sourcetype=access_combined_wcookie productId=*
# Works - productId is correct

index=web sourcetype=access_combined_wcookie productid=*
# Fails - productid (lowercase) doesn't exist</code></pre>
                <div class="highlight-box">
                    <p><strong>Best Practice:</strong> Always specify index and sourcetype</p>
                </div>
            </section>

            <section>
                <h3>Job Inspector</h3>
                <p>Troubleshoot and optimize searches</p>
                <div class="two-column">
                    <div>
                        <h4>Access</h4>
                        <p>Job menu â†’ Inspect Job</p>
                    </div>
                    <div>
                        <h4>Shows</h4>
                        <ul>
                            <li>Execution time</li>
                            <li>Events scanned</li>
                            <li>Command costs</li>
                            <li>Knowledge objects used</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section>
                <h3>Search Modes</h3>
                <table style="font-size: 0.7em;">
                    <tr>
                        <th>Mode</th>
                        <th>Speed</th>
                        <th>Use When</th>
                    </tr>
                    <tr>
                        <td>Fast</td>
                        <td>Fastest</td>
                        <td>Statistics only, minimal fields</td>
                    </tr>
                    <tr>
                        <td>Smart</td>
                        <td>Balanced</td>
                        <td>Default - Splunk decides</td>
                    </tr>
                    <tr>
                        <td>Verbose</td>
                        <td>Slowest</td>
                        <td>Need all events and fields</td>
                    </tr>
                </table>
                <p style="margin-top: 30px;"><strong>Recommendation:</strong> Use Smart mode for most searches</p>
            </section>

            <!-- Lab 1 Callout -->
            <section data-background-color="#ff6b00">
                <div class="lab-callout">
                    <h2>ðŸ”¬ Lab 1</h2>
                    <h3>Beyond Search Fundamentals</h3>
                    <p><strong>Save tags:</strong> L1S1-L1S4, L1C1-L1C2</p>
                </div>
            </section>

            <!-- Module 2: Transforming Commands -->
            <section data-background-gradient="linear-gradient(to bottom, #1c4587, #000000)">
                <h2>Module 2</h2>
                <h3>Transforming Commands for Visualizations</h3>
            </section>

            <section>
                <h3>Chart Command</h3>
                <p>Two-dimensional data aggregation</p>
                <pre><code class="language-spl">index=security sourcetype=linux_secure
| chart count over vendor_action by src_ip</code></pre>
                <div class="highlight-box">
                    <p><strong>Syntax:</strong> chart &lt;function&gt; over &lt;row&gt; by &lt;column&gt;</p>
                    <p>Creates stacked or clustered visualizations</p>
                </div>
            </section>

            <section>
                <h3>Timechart Command</h3>
                <p>Time-series specific aggregation</p>
                <pre><code class="language-spl">index=web sourcetype=vendor_sales
| timechart sum(price) by VendorCountry</code></pre>
                <div class="two-column">
                    <div>
                        <h4>Features</h4>
                        <ul>
                            <li>Automatic time binning</li>
                            <li>span parameter</li>
                            <li>Perfect for trends</li>
                        </ul>
                    </div>
                    <div>
                        <h4>Options</h4>
                        <ul>
                            <li>limit=N</li>
                            <li>useother=t/f</li>
                            <li>span=1h/1d/1w</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section>
                <h3>Trellis Layouts</h3>
                <p>Display multiple series side-by-side</p>
                <pre><code class="language-spl">sourcetype=vendor_sales VendorCountry IN (Germany, France, Italy, Spain)
| timechart sum(price) by VendorCountry</code></pre>
                <p>Then: Format â†’ Trellis Layout â†’ Enable</p>
                <div class="highlight-box">
                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>Reduces chart clutter</li>
                        <li>Easy comparison across categories</li>
                        <li>Independent y-axes available</li>
                    </ul>
                </div>
            </section>

            <!-- Lab 2 Callout -->
            <section data-background-color="#ff6b00">
                <div class="lab-callout">
                    <h2>ðŸ”¬ Lab 2</h2>
                    <h3>Transforming Commands for Visualizations</h3>
                    <p><strong>Save tags:</strong> L2S1-L2S5</p>
                </div>
            </section>

            <!-- Module 3: Trendlines, Mapping, Single Value -->
            <section data-background-gradient="linear-gradient(to bottom, #1c4587, #000000)">
                <h2>Module 3</h2>
                <h3>Trendlines, Mapping & Single Value</h3>
            </section>

            <section>
                <h3>Trendline Command</h3>
                <p>Smooth data with simple moving average (SMA)</p>
                <pre><code class="language-spl">index=security sourcetype=linux_secure "failed password"
| timechart count as failures
| trendline sma4(failures) as trend</code></pre>
                <div class="highlight-box">
                    <p><strong>sma4</strong> = 4-period moving average</p>
                    <p><strong>sma10</strong> = 10-period moving average (smoother)</p>
                    <p>Helps identify long-term trends and anomalies</p>
                </div>
            </section>

            <section>
                <h3>Single Value Visualizations</h3>
                <p>Executive dashboards and KPIs</p>
                <pre><code class="language-spl">index=security sourcetype=linux_secure "failed password"
| timechart count as failures</code></pre>
                <p>Switch to Single Value visualization</p>
                <div class="two-column">
                    <div>
                        <h4>Features</h4>
                        <ul>
                            <li>Sparklines</li>
                            <li>Trend indicators</li>
                            <li>Color thresholds</li>
                        </ul>
                    </div>
                    <div>
                        <h4>Use Cases</h4>
                        <ul>
                            <li>KPI monitoring</li>
                            <li>Executive dashboards</li>
                            <li>Quick metrics</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section>
                <h3>Choropleth Maps</h3>
                <p>Geographic data visualization</p>
                <pre><code class="language-spl">sourcetype=vendor_sales VendorCountry="United States"
| chart sum(price) as TotalSales over VendorStateProvince
| geom geo_us_states featureIdField=VendorStateProvince</code></pre>
                <div class="highlight-box">
                    <p><strong>geom command:</strong> Adds geographic boundaries</p>
                    <p>Visualize as Choropleth Map - states shaded by value</p>
                </div>
            </section>

            <section>
                <h3>Cluster Maps</h3>
                <p>Show geographic distribution with clusters</p>
                <pre><code class="language-spl">index=web sourcetype=access_combined action=purchase
| iplocation clientip
| geostats sum(price) as revenue by Country</code></pre>
                <div class="highlight-box">
                    <p><strong>iplocation:</strong> Extracts Country, City, lat, lon from IPs</p>
                    <p><strong>geostats:</strong> Aggregates for map visualizations</p>
                </div>
            </section>

            <section>
                <h3>Addtotals Command</h3>
                <p>Add summary rows and columns</p>
                <pre><code class="language-spl">sourcetype=vendor_sales VendorCountry IN (Germany, France, Italy, Spain)
| chart sum(price) as Revenue over product_name by VendorCountry
| addtotals col=t row=t label="Grand Total" fieldname="Total"</code></pre>
                <div class="two-column">
                    <div>
                        <p><code>col=t</code> - Column totals</p>
                        <p><code>row=t</code> - Row totals</p>
                    </div>
                    <div>
                        <p><code>label</code> - Row label</p>
                        <p><code>fieldname</code> - Column name</p>
                    </div>
                </div>
            </section>

            <!-- Lab 3 Callout -->
            <section data-background-color="#ff6b00">
                <div class="lab-callout">
                    <h2>ðŸ”¬ Lab 3</h2>
                    <h3>Trendlines, Mapping & Single Value</h3>
                    <p><strong>Save tags:</strong> L3S1-L3S5</p>
                </div>
            </section>

            <!-- Module 4: Filtering and Manipulating Data -->
            <section data-background-gradient="linear-gradient(to bottom, #1c4587, #000000)">
                <h2>Module 4</h2>
                <h3>Filtering & Manipulating Data</h3>
            </section>

            <section>
                <h3>Eval Command</h3>
                <p>Create and transform fields</p>
                <pre><code class="language-spl">index=network sourcetype=cisco_wsa_squid
| stats sum(sc_bytes) as total_bytes by cs_username
| eval megabytes = round(total_bytes/(1024*1024), 2)
| table cs_username megabytes
| sort -megabytes</code></pre>
                <div class="highlight-box">
                    <p><strong>Common functions:</strong> round(), len(), lower(), upper(), substr(), tostring()</p>
                </div>
            </section>

            <section>
                <h3>Case Function</h3>
                <p>Multi-condition classification</p>
                <pre><code class="language-spl">index=web sourcetype=access_combined
| eval dataSize = case(
    bytes < 2000, "Small",
    bytes >= 2000 AND bytes < 5000, "Medium",
    bytes >= 5000, "Large",
    1=1, "Unknown"
)
| stats count by dataSize</code></pre>
                <div class="highlight-box">
                    <p><strong>1=1</strong> acts as the default/else condition</p>
                </div>
            </section>

            <section>
                <h3>Search vs Where</h3>
                <div class="two-column">
                    <div>
                        <h4>search command</h4>
                        <pre><code class="language-spl">| search count > 3</code></pre>
                        <ul>
                            <li>Uses SPL syntax</li>
                            <li>Supports wildcards (*)</li>
                            <li>More intuitive</li>
                        </ul>
                    </div>
                    <div>
                        <h4>where command</h4>
                        <pre><code class="language-spl">| where count > 3</code></pre>
                        <ul>
                            <li>Expression syntax</li>
                            <li>Supports functions</li>
                            <li>Generally faster</li>
                            <li>LIKE operator</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section>
                <h3>LIKE Operator</h3>
                <p>Pattern matching with where command</p>
                <pre><code class="language-spl">index=web sourcetype=access_combined
| stats count by useragent
| where useragent LIKE "%Mobile%"
| sort -count</code></pre>
                <div class="highlight-box">
                    <p><strong>%</strong> is the wildcard (like * in search)</p>
                    <p>Only works with <code>where</code>, not <code>search</code></p>
                </div>
            </section>

            <!-- Lab 4 Callout -->
            <section data-background-color="#ff6b00">
                <div class="lab-callout">
                    <h2>ðŸ”¬ Lab 4</h2>
                    <h3>Filtering & Manipulating Data</h3>
                    <p><strong>Save tags:</strong> L4S1-L4S4, L4C1</p>
                </div>
            </section>

            <!-- Module 5: Correlating Events -->
            <section data-background-gradient="linear-gradient(to bottom, #1c4587, #000000)">
                <h2>Module 5</h2>
                <h3>Correlating Events</h3>
            </section>

            <section>
                <h3>Transaction Command</h3>
                <p>Group related events into sessions</p>
                <pre><code class="language-spl">index=web sourcetype=access_combined_wcookie
| transaction JSESSIONID
| table JSESSIONID duration eventcount</code></pre>
                <div class="highlight-box">
                    <p><strong>Auto-created fields:</strong></p>
                    <ul>
                        <li><strong>duration:</strong> Time between first and last event (seconds)</li>
                        <li><strong>eventcount:</strong> Number of events in transaction</li>
                    </ul>
                </div>
            </section>

            <section>
                <h3>Transaction Duration Analysis</h3>
                <p>Convert and analyze session lengths</p>
                <pre><code class="language-spl">index=web sourcetype=access_combined_wcookie
| transaction JSESSIONID
| eval durationMinutes = round(duration/60, 1)
| eval durationCategory = case(
    durationMinutes < 1, "Quick (< 1 min)",
    durationMinutes >= 1 AND durationMinutes < 5, "Normal (1-5 min)",
    durationMinutes >= 5 AND durationMinutes < 10, "Long (5-10 min)",
    durationMinutes >= 10, "Very Long (> 10 min)"
)
| stats count by durationCategory</code></pre>
            </section>

            <section>
                <h3>Transaction Parameters</h3>
                <table style="font-size: 0.65em;">
                    <tr>
                        <th>Parameter</th>
                        <th>Purpose</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td>maxspan</td>
                        <td>Max total duration</td>
                        <td>maxspan=30m</td>
                    </tr>
                    <tr>
                        <td>maxpause</td>
                        <td>Max time between events</td>
                        <td>maxpause=5m</td>
                    </tr>
                    <tr>
                        <td>startswith</td>
                        <td>Transaction start condition</td>
                        <td>startswith="action=view"</td>
                    </tr>
                    <tr>
                        <td>endswith</td>
                        <td>Transaction end condition</td>
                        <td>endswith="action=purchase"</td>
                    </tr>
                </table>
            </section>

            <section>
                <h3>Purchase Workflow Tracking</h3>
                <p>Analyze complete customer journeys</p>
                <pre><code class="language-spl">index=web sourcetype=access_combined_wcookie
| transaction clientip startswith="action=addtocart" endswith="action=purchase"
| eval durationMinutes = round(duration/60, 1)
| stats count as "Completed Purchases",
        avg(durationMinutes) as "Avg Time to Purchase (min)",
        avg(eventcount) as "Avg Events in Purchase Flow"</code></pre>
                <div class="highlight-box">
                    <p>Tracks only complete workflows from cart addition to purchase</p>
                </div>
            </section>

            <!-- Lab 5 Callout -->
            <section data-background-color="#ff6b00">
                <div class="lab-callout">
                    <h2>ðŸ”¬ Lab 5</h2>
                    <h3>Correlating Events</h3>
                    <p><strong>Save tags:</strong> L5S1-L5S4</p>
                </div>
            </section>

            <!-- Module 6: Introduction to Lookups -->
            <section data-background-gradient="linear-gradient(to bottom, #1c4587, #000000)">
                <h2>Module 6</h2>
                <h3>Introduction to Lookups</h3>
            </section>

            <section>
                <h3>What Are Lookups?</h3>
                <div class="highlight-box">
                    <p><strong>Add contextual information from external files</strong></p>
                    <ul>
                        <li>HTTP status codes â†’ descriptions</li>
                        <li>Product IDs â†’ product names</li>
                        <li>IP addresses â†’ geolocation</li>
                        <li>User IDs â†’ department info</li>
                    </ul>
                </div>
                <p style="margin-top: 30px;">Stored as CSV files in Splunk</p>
            </section>

            <section>
                <h3>Creating Lookup Files</h3>
                <p>Example: http_status_lookup.csv</p>
                <pre><code class="language-csv">status,status_description,status_type
200,OK,Success
404,Not Found,Client Error
500,Internal Server Error,Server Error</code></pre>
                <div class="highlight-box">
                    <p><strong>Upload:</strong> Settings â†’ Lookups â†’ Lookup table files</p>
                </div>
            </section>

            <section>
                <h3>Using Lookups</h3>
                <p>Manual lookup command</p>
                <pre><code class="language-spl">index=web sourcetype=access_combined
| lookup http_status_lookup.csv status OUTPUT status_description status_type
| stats count by status, status_description, status_type
| sort status</code></pre>
                <div class="highlight-box">
                    <p><strong>Syntax:</strong> lookup &lt;file&gt; &lt;input-field&gt; OUTPUT &lt;output-fields&gt;</p>
                </div>
            </section>

            <section>
                <h3>Automatic Lookups</h3>
                <p>Apply lookups automatically at search time</p>
                <div class="two-column">
                    <div>
                        <h4>Steps</h4>
                        <ol>
                            <li>Create lookup definition</li>
                            <li>Create automatic lookup</li>
                            <li>Specify sourcetype</li>
                            <li>Map fields</li>
                        </ol>
                    </div>
                    <div>
                        <h4>Benefits</h4>
                        <ul>
                            <li>No manual lookup needed</li>
                            <li>Fields always enriched</li>
                            <li>Consistent data</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section>
                <h3>Inputlookup & Outputlookup</h3>
                <div class="two-column">
                    <div>
                        <h4>inputlookup</h4>
                        <pre><code class="language-spl">| inputlookup http_status_lookup.csv
| table status status_description</code></pre>
                        <p>Read lookup as data source</p>
                    </div>
                    <div>
                        <h4>outputlookup</h4>
                        <pre><code class="language-spl">index=network sourcetype=cisco_wsa_squid
| stats sum(sc_bytes) as total_bytes by cs_username
| outputlookup user_bandwidth.csv</code></pre>
                        <p>Create dynamic lookup from search results</p>
                    </div>
                </div>
            </section>

            <!-- Lab 6 Callout -->
            <section data-background-color="#ff6b00">
                <div class="lab-callout">
                    <h2>ðŸ”¬ Lab 6</h2>
                    <h3>Introduction to Lookups</h3>
                    <p><strong>Save tags:</strong> L6S1-L6S5</p>
                </div>
            </section>

            <!-- Day 1 Summary -->
            <section data-background-gradient="linear-gradient(to bottom, #000000, #1c4587)">
                <h2>Day 1 Summary</h2>
                <div class="two-column" style="font-size: 0.8em;">
                    <div>
                        <h3>Skills Learned</h3>
                        <ul>
                            <li>Job Inspector for optimization</li>
                            <li>Chart & timechart commands</li>
                            <li>Trendlines & mapping</li>
                            <li>Eval & case functions</li>
                            <li>Transaction command</li>
                            <li>Lookup enrichment</li>
                        </ul>
                    </div>
                    <div>
                        <h3>Key Commands</h3>
                        <ul>
                            <li><code>chart</code></li>
                            <li><code>timechart</code></li>
                            <li><code>trendline</code></li>
                            <li><code>geostats</code></li>
                            <li><code>eval</code></li>
                            <li><code>transaction</code></li>
                            <li><code>lookup</code></li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Q&A -->
            <section data-background-gradient="linear-gradient(to bottom, #1c4587, #000000)">
                <h1>Questions?</h1>
                <p style="margin-top: 100px;">Tomorrow: Knowledge Objects & Data Models</p>
            </section>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/notes/notes.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            slideNumber: true,
            transition: 'slide',
            plugins: [ RevealHighlight, RevealNotes ]
        });
    </script>
</body>
</html>
